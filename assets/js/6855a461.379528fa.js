"use strict";(self.webpackChunkdeveloper_docs=self.webpackChunkdeveloper_docs||[]).push([[3651],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>y});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,p=u(e,["components","mdxType","originalType","parentName"]),d=s(n),c=r,y=d["".concat(i,".").concat(c)]||d[c]||g[c]||l;return n?a.createElement(y,o(o({ref:t},p),{},{components:n})):a.createElement(y,o({ref:t},p))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var u={};for(var i in t)hasOwnProperty.call(t,i)&&(u[i]=t[i]);u.originalType=e,u[d]="string"==typeof e?e:r,o[1]=u;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},19365:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(20053);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,o),hidden:n},t)}},11470:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(58168),r=n(96540),l=n(20053),o=n(23104),u=n(56347),i=n(57485),s=n(31682),p=n(89466);function d(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function g(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=null!=t?t:d(n);return function(e){const t=(0,s.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function c(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function y(e){let{queryString:t=!1,groupId:n}=e;const a=(0,u.W6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,i.aZ)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=g(e),[o,u]=(0,r.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!c({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const r=null!=(t=a.find((e=>e.default)))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:l}))),[i,s]=y({queryString:n,groupId:a}),[d,m]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[a,l]=(0,p.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:a}),b=(()=>{const e=null!=i?i:d;return c({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{b&&u(b)}),[b]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!c({value:e,tabValues:l}))throw new Error("Can't select invalid tab value="+e);u(e),s(e),m(e)}),[s,m,l]),tabValues:l}}var b=n(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function N(e){let{className:t,block:n,selectedValue:u,selectValue:i,tabValues:s}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.a_)(),g=e=>{const t=e.currentTarget,n=p.indexOf(t),a=s[n].value;a!==u&&(d(t),i(a))},c=e=>{var t;let n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{var a;const t=p.indexOf(e.currentTarget)+1;n=null!=(a=p[t])?a:p[0];break}case"ArrowLeft":{var r;const t=p.indexOf(e.currentTarget)-1;n=null!=(r=p[t])?r:p[p.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},t)},s.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.A)({role:"tab",tabIndex:u===t?0:-1,"aria-selected":u===t,key:t,ref:e=>p.push(e),onKeyDown:c,onClick:g},o,{className:(0,l.A)("tabs__item",f.tabItem,null==o?void 0:o.className,{"tabs__item--active":u===t})}),null!=n?n:t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function h(e){const t=m(e);return r.createElement("div",{className:(0,l.A)("tabs-container",f.tabList)},r.createElement(N,(0,a.A)({},e,t)),r.createElement(v,(0,a.A)({},e,t)))}function w(e){const t=(0,b.A)();return r.createElement(h,(0,a.A)({key:String(t)},e))}},87288:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>u,toc:()=>s});var a=n(58168),r=(n(96540),n(15680));n(86025),n(11470),n(19365);const l={id:"luna-compiler-v2",title:"Luna Compiler V2",sidebar_label:"Luna Compiler V2",description:"Information on new Luna Compiler for newer C# features",keywords:["luna","compiler","v2","support","supported","unsupported","unity","playable","luna"]},o="Luna Compiler V2",u={unversionedId:"playable/code/luna-compiler-v2",id:"playable/code/luna-compiler-v2",title:"Luna Compiler V2",description:"Information on new Luna Compiler for newer C# features",source:"@site/docs/playable/code/luna-compiler-v2.md",sourceDirName:"playable/code",slug:"/playable/code/luna-compiler-v2",permalink:"/docs/playable/code/luna-compiler-v2",draft:!1,tags:[],version:"current",frontMatter:{id:"luna-compiler-v2",title:"Luna Compiler V2",sidebar_label:"Luna Compiler V2",description:"Information on new Luna Compiler for newer C# features",keywords:["luna","compiler","v2","support","supported","unsupported","unity","playable","luna"]},sidebar:"gettingStarted",previous:{title:"Async Await",permalink:"/docs/playable/code/unity-cs-features/async-await"},next:{title:"Dev Environment",permalink:"/docs/playable/code/luna-in-browser/dev-environment"}},i={},s=[{value:"C# 8.0 Features",id:"c-80-features",level:4},{value:"C# 9.0 Features",id:"c-90-features",level:4}],p={toc:s},d="wrapper";function g(e){let{components:t,...l}=e;return(0,r.yg)(d,(0,a.A)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"luna-compiler-v2"},"Luna Compiler V2"),(0,r.yg)("p",null,"Playable Plugin now has support of C# 8.0 and C# 9.0 features. This option is disabled by default and could be activated in Playable Plugin Plugin window."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"images-medium",src:n(25923).A,width:"1996",height:"1498"})),(0,r.yg)("h1",{id:"when-to-use"},"When to use?"),(0,r.yg)("p",null,"If you know, that you use C# 8.0 or C# 9.0 features in project - enabling of Luna Compiler v2 is recommended."),(0,r.yg)("p",null,"Popular C# 8.0 and C# 9.0 features:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Pattern matching")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cs"},"if(fruit is Apple)\n{\n  MakeApplePieFrom(fruit as Apple);\n}\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Using declarations")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cs"},'static int WriteLinesToFile(IEnumerable<string> lines)\n{\n    using var file = new System.IO.StreamWriter("WriteLines2.txt");\n    int skippedLines = 0;\n    foreach (string line in lines)\n    {\n        if (!line.Contains("Second"))\n        {\n            file.WriteLine(line);\n        }\n        else\n        {\n            skippedLines++;\n        }\n    }\n    // Notice how skippedLines is in scope here.\n    return skippedLines;\n    // file is disposed here\n}\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Null-coalescing assignment")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cs"},'List<int> numbers = null;\nint? i = null;\n\nnumbers ??= new List<int>();\nnumbers.Add(i ??= 17);\nnumbers.Add(i ??= 20);\n\nConsole.WriteLine(string.Join(" ", numbers));  // output: 17 17\nConsole.WriteLine(i);  // output: 17\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Enhancement of interpolated verbatim strings")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cs"},'var myString1 = $@"...";\nvar myString2 = @$"...";\n')),(0,r.yg)("p",null,"If you see errors on Luna Compiler v1 (default compiler), then enabling of Luna Compiler v2 could solve the issue:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Feature is not available in C# 7.0. Please use language version 8.0 or greater."),(0,r.yg)("li",{parentName:"ul"},"An expression of type MyCustomType cannot be handled by a pattern of type \u201cnot null\u201d in C# 8.0. Please use language version 9.0 or greater."),(0,r.yg)("li",{parentName:"ul"},"Tuple element name MyElementName is inferred. Please use language version 9.0 or greater to access an element by its inferred name."),(0,r.yg)("li",{parentName:"ul"},"Invalid MyCustomType value: null for C# 8.0. Please use language version 9.0 or greater.")),(0,r.yg)("h1",{id:"supported-unity-versions"},"Supported Unity versions"),(0,r.yg)("p",null,"Option is not available on Unity 2019.X - 2020.1."),(0,r.yg)("p",null,"C# 8.0 works on Unity 2020.2 or higher."),(0,r.yg)("p",null,"C# 9.0 works on Unity 2021.2 or higher."),(0,r.yg)("h1",{id:"tools"},"Tools"),(0,r.yg)("p",null,"Luna Compiler v2 uses Mono Runtime, MSBuild and Roslyn compiler directly from Unity Editor installation, so no additional tools required."),(0,r.yg)("h1",{id:"how-it-affects-your-playable"},"How it affects your playable?"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"With Luna Compiler v2 you could use newest C# features."),(0,r.yg)("li",{parentName:"ul"},"With Luna Compiler v2 build time slightly increased."),(0,r.yg)("li",{parentName:"ul"},"With Luna Compiler v2 all Luna types now arent exposed to user (see Caveats section for more details).")),(0,r.yg)("h1",{id:"supported-features"},"Supported features"),(0,r.yg)("p",null,"Playable Plugin Plugin supports almost all C# 9.0 features, which Unity supports. Full list of tested features you could find below:"),(0,r.yg)("h4",{id:"c-80-features"},"C# 8.0 Features"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Feature"),(0,r.yg)("th",{parentName:"tr",align:null},"Support"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Null-coalescing assignment"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Pattern-matching enhancements"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Readonly members"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Static local functions"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Using declarations"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Enhancement of interpolated verbatim strings"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Disposable ref structs"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Stackalloc in nested expressions"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Unmanaged constructed types"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Default interface methods"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Indices and ranges"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Asynchronous streams"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Asynchronous disposable"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")))),(0,r.yg)("h4",{id:"c-90-features"},"C# 9.0 Features"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Feature"),(0,r.yg)("th",{parentName:"tr",align:null},"Support"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Lambda discard parameters"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Target-typed new"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Pattern-matching enhancements"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Static anonymous functions"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Lambda discard parameters"),(0,r.yg)("td",{parentName:"tr",align:null},"Supported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Target-typed conditional expression"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Local function attribute"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Native-sized integers"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Skip localsinit"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Records"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Init-only setters"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Covariant returns"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Top-level statements"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Function Pointers"),(0,r.yg)("td",{parentName:"tr",align:null},"Unsupported (Unity does not support)")))),(0,r.yg)("h1",{id:"caveats"},"Caveats"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Luna specific types")),(0,r.yg)("p",null,"In some rare cases, your code could use Playable Plugin Plugin internal classes (due to custom package or any kind of custom changes in your project) such as ElementComponent class, so, it could not be exposed as public anymore. Such issues have workarounds, you could ask for help from our support."))}g.isMDXComponent=!0},25923:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/lunacompilerv2-61138013d0fb508e010c5ff25cc69d9f.png"}}]);