"use strict";(self.webpackChunkdeveloper_docs=self.webpackChunkdeveloper_docs||[]).push([[97231],{15680:(e,n,r)=>{r.d(n,{xA:()=>p,yg:()=>h});var t=r(96540);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=t.createContext({}),c=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},p=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(r),m=o,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?t.createElement(h,i(i({ref:n},p),{},{components:r})):t.createElement(h,i({ref:n},p))}));function h(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=r[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},32492:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var t=r(58168),o=(r(96540),r(15680));const a={id:"profiler-js",title:"Js Profiler",sidebar_label:"JS profiler",description:"How to view, record and profile the performance of your playable in Chrome",keywords:["profiler","performance","chrome","record","track","playable","luna"]},i=void 0,l={unversionedId:"playable/code/luna-in-browser/profiler-js",id:"playable/code/luna-in-browser/profiler-js",title:"Js Profiler",description:"How to view, record and profile the performance of your playable in Chrome",source:"@site/docs/playable/code/luna-in-browser/profiler-js.md",sourceDirName:"playable/code/luna-in-browser",slug:"/playable/code/luna-in-browser/profiler-js",permalink:"/docs/playable/code/luna-in-browser/profiler-js",draft:!1,tags:[],version:"current",frontMatter:{id:"profiler-js",title:"Js Profiler",sidebar_label:"JS profiler",description:"How to view, record and profile the performance of your playable in Chrome",keywords:["profiler","performance","chrome","record","track","playable","luna"]},sidebar:"gettingStarted",previous:{title:"Debugging\xa0JS 101",permalink:"/docs/playable/code/luna-in-browser/debug-js"},next:{title:"Luna Debugger",permalink:"/docs/playable/code/luna-in-browser/luna-debugger"}},s={},c=[{value:"Record Runtime Performance",id:"record-runtime-performance",level:2},{value:"Record Performance",id:"record-performance",level:2},{value:"Chrome Profiling: Example",id:"chrome-profiling-example",level:2},{value:"Analysis of the cause",id:"analysis-of-the-cause",level:2}],p={toc:c},d="wrapper";function u(e){let{components:n,...a}=e;return(0,o.yg)(d,(0,t.A)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Chrome DevTools provides a profiler for the Chrome browser, which gives developers a way to analyse the performance of their playable ad in the browser."),(0,o.yg)("p",null,"You are able to check a variety of events and data from your scene at runtime or during loading in order to identify potential issues, drops in performance and benchmark your playable."),(0,o.yg)("div",{className:"callout info"},"For precise measurements, open Google Chrome in Incognito Mode. Incognito Mode ensures that Chrome runs in a clean state. For example, if you have a lot of extensions installed, those extensions might create noise in your performance measurements."),(0,o.yg)("div",{className:"callout info"},"Open Chrome DevTools by pressing ",(0,o.yg)("b",null,"command+option+i")," (Mac) or ",(0,o.yg)("b",null,"control+shift+i")," (Windows, Linux) and navigate to the performance tab to see what's happening under the hood."),(0,o.yg)("h2",{id:"record-runtime-performance"},"Record Runtime Performance"),(0,o.yg)("p",null,"Once selected, the performance tab should show the profiler in the chrome window. There are some steps you need to do in order to start capturing profiling data."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"images-msmall",src:r(52704).A,width:"310",height:"110"})),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"In DevTools, click the Record option (first left option). DevTools will then capture performance metrics as the page runs."),(0,o.yg)("li",{parentName:"ol"},"Interact with the page, or wait a few seconds for the data to capture the sequence you want to analyse."),(0,o.yg)("li",{parentName:"ol"},"Click Stop when the sequence is finished. DevTools will stop recording, process the data and then display the results on the Performance panel.")),(0,o.yg)("p",null,"Once the Performance tab is selected, and a session recorded, here is what a typical view may look like."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"images-large",src:r(27976).A,width:"3578",height:"1878"})),(0,o.yg)("h2",{id:"record-performance"},"Record Performance"),(0,o.yg)("p",null,"The profiling in Unity may not show performance issues with scenes but when converted and run in HTML5 it can be apparent that some gameplay is not very performant and slow."),(0,o.yg)("p",null,"DevTools allows you to identify which part is performing poorly much like the Unity profiler."),(0,o.yg)("div",{className:"callout info"},"Begin recording and play through your ad, its important to capture the area that may be causing performance issues or causing inconsistent results."),(0,o.yg)("div",{className:"callout info"},"Unity engine APIs may not be as performant once converted into HTML5, as builds need to be lightweight and have limitations of running on the web-browser."),(0,o.yg)("h2",{id:"chrome-profiling-example"},"Chrome Profiling: Example"),(0,o.yg)("p",null,"Recorded profiles show a timeline that can be used to narrow down the data to a specific area of information, allow for finer look into the calls like rendering, events, functions and time-taken to perform actions."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"images-large",src:r(4632).A,width:"2070",height:"300"})),(0,o.yg)("p",null,"In the image below ",(0,o.yg)("inlineCode",{parentName:"p"},"Animation Frame Fired")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"Function Call")," is causing a drop in performance, as these are taking a long time to execute, which is slowing down the pace of the ad gameplay. In these situations you want gameplay to be a fluid as possible!"),(0,o.yg)("p",null,"Here we have an animation event and function call that is causing a slow in performance due to the time-taken to perform these calls, but identifies what the issue is in terms of where begin to reduce this time delay and improving performance."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"images-medium",src:r(30016).A,width:"2338",height:"978"})),(0,o.yg)("p",null,"The Views are from a specific analysing tab which is:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Main")),(0,o.yg)("p",null,"The main tab represents the main thread activity with a Flame chart. The x-axis represents the recording over time. The y-axis represents the call stack. From top to bottom, the events on top cause the events below it."),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Flame Chart")),(0,o.yg)("p",null,"The Flame chart as described above shows the call stack and events. These events can be clicked and viewed in the activity table for specific events information inside the call stack."),(0,o.yg)("h2",{id:"analysis-of-the-cause"},"Analysis of the cause"),(0,o.yg)("p",null,"To understand why this happens, the effects of running your code in a different environment needs to always be in consideration."),(0,o.yg)("p",null,"Following the Flame chart down the execution order it helps to identify where the problem origin is. In this case somewhere during animation call and a specific function call."),(0,o.yg)("p",null,"The solution for this example is that the ",(0,o.yg)("inlineCode",{parentName:"p"},"Instantiation")," of the ",(0,o.yg)("inlineCode",{parentName:"p"},"Cube")," objects followed by a ",(0,o.yg)("inlineCode",{parentName:"p"},"FindObjectWithTag")," call, causes a time-consuming and slow process of searching the scene and creating many objects at the same time, especially if you then ",(0,o.yg)("inlineCode",{parentName:"p"},"Destroy")," these objects."),(0,o.yg)("p",null,"A general point of advice is to avoid these kinds of issues by not using methods that require such resource expensive calls or require a large amount of draw calls in an update method."),(0,o.yg)("div",{className:"callout info"},"Try to object-pool in these cases which will significantly improve performance in your scene."))}u.isMDXComponent=!0},30016:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/performance-call-tree-913100491ad48f06954c953f26c4286e.png"},27976:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/performance-page-f2a4e76b74351c08aa1619e986debc14.png"},4632:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/performance-timeline-9e75ccc6f135c60e869bb654d75e927a.png"},52704:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/profiler-options-34b6fc5216042ee1ff9a8235d7739e7e.png"}}]);