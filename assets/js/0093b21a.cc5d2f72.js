"use strict";(self.webpackChunkdeveloper_docs=self.webpackChunkdeveloper_docs||[]).push([[77421],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>m});var r=t(96540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},f="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),f=c(t),u=i,m=f["".concat(s,".").concat(u)]||f[u]||g[u]||o;return t?r.createElement(m,a(a({ref:n},p),{},{components:t})):r.createElement(m,a({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[f]="string"==typeof e?e:i,a[1]=l;for(var c=2;c<o;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},38099:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=t(58168),i=(t(96540),t(15680));const o={id:"z-fighting-flickering",title:"Zfighting  flickering on iOS on a single object with multiple materials",sidebar_label:"Zfighting  flickering on iOS on a single object with multiple materials"},a=void 0,l={unversionedId:"playable/common-issues/rendering/z-fighting-flickering",id:"playable/common-issues/rendering/z-fighting-flickering",title:"Zfighting  flickering on iOS on a single object with multiple materials",description:"This is likely happening due to on iOS (and other platforms) floating point imprecision can cause flickering issues, as the vertices which make up the model can end up being slightly off.",source:"@site/docs/playable/common-issues/rendering/z-fighting-flickering.md",sourceDirName:"playable/common-issues/rendering",slug:"/playable/common-issues/rendering/z-fighting-flickering",permalink:"/docs/playable/common-issues/rendering/z-fighting-flickering",draft:!1,tags:[],version:"current",frontMatter:{id:"z-fighting-flickering",title:"Zfighting  flickering on iOS on a single object with multiple materials",sidebar_label:"Zfighting  flickering on iOS on a single object with multiple materials"},sidebar:"gettingStarted",previous:{title:"Frame rate is low",permalink:"/docs/playable/common-issues/rendering/frame-rate-is"},next:{title:"Texture flickering  flashing between two different rotations each frame",permalink:"/docs/playable/common-issues/rendering/texture-flickering"}},s={},c=[],p={toc:c},f="wrapper";function g(e){let{components:n,...t}=e;return(0,i.yg)(f,(0,r.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("p",null,"This is likely happening due to on iOS (and other platforms) floating point imprecision can cause flickering issues, as the vertices which make up the model can end up being slightly off."),(0,i.yg)("p",null,"E.g. the vertex on the first pass is at position ",(0,i.yg)("inlineCode",{parentName:"p"},"1.00000000003"),", but the second render pass the vertex is calculated at being in position ",(0,i.yg)("inlineCode",{parentName:"p"},"1.00000000001")," which places it slightly behind the first vertex and therefore appears to be overlaying it."),(0,i.yg)("p",null,"The change in precision as the mesh or camera moves causes the flickering effect."),(0,i.yg)("p",null,"Possible solution:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Adjust the shader to give a slight offset between each of the render passes."),(0,i.yg)("p",{parentName:"li"},"For instance; on the first pass give the vertex a slight offset of ",(0,i.yg)("inlineCode",{parentName:"p"},"1.00000000001"),", and for the second pass offset the vertex by ",(0,i.yg)("inlineCode",{parentName:"p"},"1.00000000003"),". This forces the vertex to be rendered further forward in the Z order when being rendered."),(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"See below for a code example.")))),(0,i.yg)("p",null,"Pass 1. Line 10 pushes the vertex forward in the Z direction by 0.004 if running on a mobile device."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-cs"},"v2f vert(appdata v)\n                {\n                    v2f o;\n                    float3 wsNormal = normalize(UnityObjectToWorldDir(v.normal).xyz);\n                    float4 wsPosition = mul(unity_ObjectToWorld, v.vertex);\n                    wsPosition.xyz += wsNormal * _OutsideWallWidth;\n                    o.vertex = mul(UNITY_MATRIX_VP, wsPosition);\n                    o.screenCoords = ComputeScreenPos(o.vertex);\n#ifdef SHADER_API_MOBILE\n                    o.vertex.z += 0.004;\n#endif\n                    return o;\n")),(0,i.yg)("p",null,"Pass 2. Line 10, pushes the vertex forward in the Z direction by 0.002 if running on a mobile device."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-cs"},"v2f vert(appdata v)\n                {\n                    v2f o;\n\n                    float3 wsNormal = normalize(UnityObjectToWorldDir(v.normal).xyz);\n                    float4 wsPosition = mul(unity_ObjectToWorld, v.vertex);\n                    wsPosition.xyz += wsNormal * _OutlineWidth;\n                    o.vertex = mul(UNITY_MATRIX_VP, wsPosition);\n#ifdef SHADER_API_MOBILE\n                    o.vertex.z += 0.002;\n#endif\n                    return o;\n")))}g.isMDXComponent=!0}}]);